---
title: React SDK
subtitle: "Conversational AI SDK: deploy customized, interactive voice agents in minutes."
slug: conversational-ai/libraries/conversational-ai-sdk-react
---

<Info>
  Also see the [Conversational AI
  overview](/docs/conversational-ai/docs/introduction)
</Info>

## Installation

Install the package in your project through package manager.

```shell
npm install @11labs/react
# or
yarn add @11labs/react
# or
pnpm install @11labs/react
```

## Usage

### useConversation

React hook for managing websocket connection and audio usage for ElevenLabs Conversational AI.

#### Initialize conversation

First, initialize the Conversation instance.

```tsx
const conversation = useConversation();
```

Note that Conversational AI requires microphone access.
Consider explaining and allowing access in your apps UI before the Conversation kicks off.

```js
// call after explaning to the user why the microphone access is needed
await navigator.mediaDevices.getUserMedia();
```

#### Options

The Conversation can be initialized with certain options. Those are all optional.

```tsx
const conversation = useConversation({
  /* options object */
});
```

- **onConnect** - handler called when the conversation websocket connection is established.
- **onDisconnect** - handler called when the conversation websocket connection is ended.
- **onMessage** - handler called when a new message is received. These can be tentative or final transcriptions of user voice, replies produced by LLM, or debug message when a debug option is enabled.
- **onError** - handler called when a error is encountered.

#### Methods

**startConversation**

The `startConversation` method kicks off the websocket connection and starts using the microphone to communicate with the ElevenLabs Conversational AI agent.
The method requires either a signed URL `signedUrl` or an agent ID `agentId`. For public agents, the `agentId` must be set, which can be found in the [dashboard](https://elevenlabs.io/app/conversational-ai).

<CodeGroup>

```js Public agent
const conversation = useConversation();
const conversationId = await conversation.startSession({
  agentId: "<public agent id>",
});
```

```js Authenticated agent
const conversation = useConversation();
const conversationId = await conversation.startSession({
  signedUrl: "<conversation signed url>", // learn how to retrieve this below
});
```

</CodeGroup>

**Authenticated agents** require a `signedUrl` to be passed to the `startSession` method.

<Steps>
<Step title="Enable authentication in the dashboard">
In the ElevenLabs **Security** tab, enable the **Enable authentication** setting.
</Step>

<Step title="Generate a signed URL">
  <Note>This operation must be performed server-side.</Note>
  <CodeGroup>

```js Using the REST API
const requestHeaders = new Headers();
requestHeaders.set("xi-api-key", process.env.XI_API_KEY); // use your ElevenLabs API key

const response = await fetch(
  "https://api.elevenlabs.io/v1/convai/conversation/get_signed_url?agent_id={{agent id created through ElevenLabs UI}}",
  {
    method: "GET",
    headers: requestHeaders,
  }
);

if (!response.ok) {
  return Response.error();
}

const body = await response.json();
const url = body.signed_url; // use this URL for startConversation method.
```

```js Using the ElevenLabs SDK
import { ElevenLabsClient } from "elevenlabs"; // install the ElevenLabs SDK

const client = new ElevenLabsClient({
  apiKey,
});

const { signed_url } = await client.conversationalAi.getSignedUrl({
  agent_id: "<agent id>", // this can be found in the dashboard
});

// Set the `signedUrl` parameter in the startConversation method to the signed_url retrieved above.
```

</CodeGroup>

</Step>

</Steps>

`startSession` returns promise resolving to `conversationId`. The value is a globally unique conversation ID you can use to identify separate conversations.

**endSession**

A method to manually end the conversation. The method will end the conversation and disconnect from websocket.

```js
await conversation.endSession();
```

**setVolume**

A method to set the output volume of the conversation. Accepts object with volume field between 0 and 1.

```js
await conversation.setVolume({ volume: 0.5 });
```

**status**

A React state containing the current status of the conversation.

```js
const { status } = useConversation();
console.log(status); // "connected" or "disconnected"
```

**isSpeaking**

A React state containing the information of whether the agent is currently speaking.
This is helpful for indicating the mode in your UI.

```js
const { isSpeaking } = useConversation();
console.log(isSpeaking); // boolean
```
